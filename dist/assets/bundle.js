(()=>{const e=document.querySelector(".chat-list"),t=document.querySelector(".new-chat"),a=document.querySelector(".new-name"),n=document.querySelector(".update-mssg"),r=document.querySelector(".chat-rooms");t.addEventListener("submit",(e=>{e.preventDefault();const a=t.message.value.trim();u.addChat(a).then((()=>t.reset())).catch((e=>console.log(e)))})),a.addEventListener("submit",(e=>{e.preventDefault();const t=a.name.value.trim();u.updateName(t),a.reset(),n.innerText=`Your name was updated to ${t}`,setTimeout((()=>n.innerText=""),3e3)})),r.addEventListener("click",(e=>{"BUTTON"===e.target.tagName&&(o.clear(),u.updateRoom(e.target.getAttribute("id")),u.getChats((e=>o.render(e))))})),localStorage.username&&localStorage.username;const o=new ChatUI(e),u=new Chatroom("general","anonymous");u.getChats((e=>o.render(e)))})();